{"ast":null,"code":"import _objectSpread from\"/Users/lilosivert/Downloads/Code/React-Development/Online-Shop/Front-End/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createSlice}from\"@reduxjs/toolkit\";import{toast}from\"react-toastify\";var initialState={//intial state of cart\ncartItems:localStorage.getItem(\"cartItems\")?JSON.parse(localStorage.getItem(\"cartItems\"))//cartitems is the key\n:[],//local storage for saving cart when refreshed.\ncartTotalQuantity:0,cartTotalAmount:0};var cartSlice=createSlice({name:\"cart\",initialState:initialState,reducers:{addToCart:function addToCart(state,action){var itemIndex=state.cartItems.findIndex(function(item){return item._id===action.payload._id;});//using find index, an array method, to chevk if the item we are trying to add is already in the cart, compare id's\nif(itemIndex>=0){//incase item is already in cart, condition ^\nstate.cartItems[itemIndex].cartQuantity+=1;toast.info(\"Increased \".concat(state.cartItems[itemIndex].name,\" Quantity\"),{position:\"bottom-center\"});}else{var tempProduct=_objectSpread(_objectSpread({},action.payload),{},{cartQuantity:1});state.cartItems.push(tempProduct);toast.success(\"\".concat(action.payload.name,\" Added to Cart\"),{position:\"bottom-center\"});}localStorage.setItem(\"cartItems\",JSON.stringify(state.cartItems));},removeFromCart:function removeFromCart(state,action){var nextCartItems=state.cartItems.filter(function(cartItem){return cartItem._id!==action.payload._id;});state.cartItems=nextCartItems;localStorage.setItem(\"cartItems\",JSON.stringify(state.cartItems));toast.error(\"\".concat(action.payload.name,\" remove from cart\"),{position:\"bottom-left\"});},decreaseCart:function decreaseCart(state,action){var itemIndex=state.cartItems.findIndex(function(cartItem){return cartItem._id===action.payload._id;});if(state.cartItems[itemIndex].cartQuantity>1){state.cartItems[itemIndex].cartQuantity-=1;toast.info(\"Decreased \".concat(action.payload.name,\" cart quantity\"),{position:\"bottom-left\"});}else if(state.cartItems[itemIndex].cartQuantity===1){var nextCartItems=state.cartItems.filter(//same code as before to rmeove item from cart when quantity =1\nfunction(cartItem){return cartItem._id!==action.payload._id;});state.cartItems=nextCartItems;toast.error(\"\".concat(action.payload.name,\" remove from cart\"),{position:\"bottom-left\"});}localStorage.setItem(\"cartItems\",JSON.stringify(state.cartItems));},clearCart:function clearCart(state,action){state.cartItems=[];toast.error(\"Cart Cleared\",{position:\"bottom-left\"});localStorage.setItem(\"cartItems\",JSON.stringify(state.cartItems));},getTotals:function getTotals(state,action){var _state$cartItems$redu=state.cartItems.reduce(function(cartTotal,cartItem){var price=cartItem.price,cartQuantity=cartItem.cartQuantity;var itemTotal=price*cartQuantity;cartTotal.total+=itemTotal;cartTotal.quantity+=cartQuantity;return cartTotal;},{total:0,quantity:0}),total=_state$cartItems$redu.total,quantity=_state$cartItems$redu.quantity;state.cartTotalQuantity=quantity;state.cartTotalAmount=total;}}});var _cartSlice$actions=cartSlice.actions,clearCart=_cartSlice$actions.clearCart,addToCart=_cartSlice$actions.addToCart,removeFromCart=_cartSlice$actions.removeFromCart,decreaseCart=_cartSlice$actions.decreaseCart,getTotals=_cartSlice$actions.getTotals;export{clearCart,addToCart,removeFromCart,decreaseCart,getTotals};export default cartSlice.reducer;","map":{"version":3,"names":["createSlice","toast","initialState","cartItems","localStorage","getItem","JSON","parse","cartTotalQuantity","cartTotalAmount","cartSlice","name","reducers","addToCart","state","action","itemIndex","findIndex","item","_id","payload","cartQuantity","info","position","tempProduct","push","success","setItem","stringify","removeFromCart","nextCartItems","filter","cartItem","error","decreaseCart","clearCart","getTotals","reduce","cartTotal","price","itemTotal","total","quantity","actions","reducer"],"sources":["/Users/lilosivert/Downloads/Code/React-Development/Online-Shop/Front-End/src/features/cartSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport { toast } from \"react-toastify\";\n\nconst initialState ={ //intial state of cart\n    cartItems: localStorage.getItem(\"cartItems\") ? JSON.parse(localStorage.getItem(\"cartItems\"))  //cartitems is the key\n    : [], //local storage for saving cart when refreshed.\n    cartTotalQuantity: 0,\n    cartTotalAmount: 0\n};\n\nconst cartSlice = createSlice({\n    name: \"cart\",\n    initialState,\n    reducers: {\n        addToCart(state, action){\n            const itemIndex = state.cartItems.findIndex( \n                (item) => item._id === action.payload._id\n            ); //using find index, an array method, to chevk if the item we are trying to add is already in the cart, compare id's\n            if(itemIndex >= 0){ //incase item is already in cart, condition ^\n                state.cartItems[itemIndex].cartQuantity += 1;\n                toast.info(`Increased ${state.cartItems[itemIndex].name} Quantity`, {\n                    position: \"bottom-center\",\n                })\n            }\n            else {\n                const tempProduct = {...action.payload, cartQuantity: 1 };\n                state.cartItems.push(tempProduct);\n                toast.success(`${action.payload.name} Added to Cart`, {\n                    position: \"bottom-center\",\n                });\n            }\n            localStorage.setItem(\"cartItems\", JSON.stringify(state.cartItems));\n        },\n        removeFromCart(state, action){\n            const nextCartItems = state.cartItems.filter(\n                cartItem => cartItem._id !== action.payload._id \n            )\n\n            state.cartItems = nextCartItems\n            localStorage.setItem(\"cartItems\", JSON.stringify(state.cartItems));\n            toast.error(`${action.payload.name} remove from cart`, {\n                position: \"bottom-left\",\n            });\n        },\n        decreaseCart(state, action){\n            const itemIndex = state.cartItems.findIndex(\n                cartItem => cartItem._id === action.payload._id\n            )\n            if(state.cartItems[itemIndex].cartQuantity > 1){\n                state.cartItems[itemIndex].cartQuantity -= 1\n\n                toast.info(`Decreased ${action.payload.name} cart quantity`, {\n                    position: \"bottom-left\",\n                });\n            }\n            else if (state.cartItems[itemIndex].cartQuantity === 1){\n                const nextCartItems = state.cartItems.filter( //same code as before to rmeove item from cart when quantity =1\n                    cartItem => cartItem._id !== action.payload._id \n                )\n    \n                state.cartItems = nextCartItems\n                toast.error(`${action.payload.name} remove from cart`, {\n                    position: \"bottom-left\",\n                });\n            }\n            localStorage.setItem(\"cartItems\", JSON.stringify(state.cartItems));\n        },\n        clearCart(state, action){\n            state.cartItems = [];\n            toast.error(`Cart Cleared`,\n            {\n                position: \"bottom-left\",\n            });\n            localStorage.setItem(\"cartItems\", JSON.stringify(state.cartItems));\n        },\n        getTotals(state, action){\n             \n            let{total,quantity}= state.cartItems.reduce(\n                (cartTotal, cartItem)=>\n                {\n                    const{price,cartQuantity} = cartItem;\n                    const itemTotal = price * cartQuantity;\n\n                    cartTotal.total += itemTotal;\n                    cartTotal.quantity += cartQuantity;\n\n                    return cartTotal;\n\n                },{\n                    total: 0,\n                    quantity: 0\n                }\n            );\n\n            state.cartTotalQuantity = quantity;\n            state.cartTotalAmount = total;\n        }\n    },\n});\n\nexport const { clearCart,addToCart, removeFromCart, decreaseCart, getTotals } = cartSlice.actions;\nexport default cartSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}