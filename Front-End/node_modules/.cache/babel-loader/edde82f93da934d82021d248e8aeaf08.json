{"ast":null,"code":"import _defineProperty from\"/Users/lilosivert/Downloads/Code/React-Development/Online-Shop/Front-End/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/Users/lilosivert/Downloads/Code/React-Development/Online-Shop/Front-End/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/lilosivert/Downloads/Code/React-Development/Online-Shop/Front-End/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import axios from\"axios\";import{url}from\"./api\";import{toast}from\"react-toastify\";var initialState={items:[],status:null,createStatus:null};export var productsFetch=createAsyncThunk(//action creator\n\"products/productsFetch\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(url,\"/products\"));case 3:response=_context.sent;//get from url/products getting all products\nconsole.log(response);//ADDED\nreturn _context.abrupt(\"return\",response===null||response===void 0?void 0:response.data);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);})));export var productsCreate=createAsyncThunk(//action creator\n\"products/productsCreate\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(values){var response,_error$response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"\".concat(url,\"/products\"),values);case 3:response=_context2.sent;//async action\nconsole.log(values);//ADDED\nreturn _context2.abrupt(\"return\",response.data);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);toast.error((_error$response=_context2.t0.response)===null||_error$response===void 0?void 0:_error$response.data);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function(_x){return _ref2.apply(this,arguments);};}());var productsSlice=createSlice({//a slice is logic containing reducers and actions, wont have different files for them\nname:\"products\",initialState:initialState,reducers:{},//generate action creators\nextraReducers:(_extraReducers={},_defineProperty(_extraReducers,productsFetch.pending,function(state,action){state.status=\"pending\";}),_defineProperty(_extraReducers,productsFetch.fulfilled,function(state,action){state.items=action.payload;state.status=\"success\";}),_defineProperty(_extraReducers,productsFetch.rejected,function(state,action){state.status=\"rejected\";}),_defineProperty(_extraReducers,productsCreate.pending,function(state,action){state.createStatus=\"pending\";}),_defineProperty(_extraReducers,productsCreate.fulfilled,function(state,action){state.items.push(action.payload);state.createStatus=\"success\";}),_defineProperty(_extraReducers,productsCreate.rejected,function(state,action){state.createStatus=\"rejected\";}),_extraReducers)//only handle action types\n});export default productsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","url","toast","initialState","items","status","createStatus","productsFetch","get","response","console","log","data","productsCreate","values","post","error","productsSlice","name","reducers","extraReducers","pending","state","action","fulfilled","payload","rejected","push","reducer"],"sources":["/Users/lilosivert/Downloads/Code/React-Development/Online-Shop/Front-End/src/features/productsSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { url } from \"./api\";\nimport { toast } from \"react-toastify\";\n\nconst initialState = {\n    items: [], \n    status: null,\n    createStatus: null,\n};\n\nexport const productsFetch = createAsyncThunk( //action creator\n    \"products/productsFetch\",\n    async() => {\n        try {\n            const response = await axios.get(`${url}/products`); //get from url/products getting all products\n            console.log(response);//ADDED\n            return response?.data;//? this will report an error incase we dont have a property data in reponse\n        }\n        catch(error) {\n            console.log(error);\n        }\n    }\n);\n\nexport const productsCreate = createAsyncThunk( //action creator\n    \"products/productsCreate\",\n    async(values) => {\n        try {\n      const response = await axios.post(`${url}/products`, values); //async action\n      console.log(values);//ADDED\n      return response.data;//? this will report an error incase we dont have a property data in reponse\n        }\n        catch(error) {\n            console.log(error);\n            toast.error(error.response?.data);\n        }\n    }\n);\n\nconst productsSlice = createSlice({ \n    //a slice is logic containing reducers and actions, wont have different files for them\n    name: \"products\",\n    initialState,\n    reducers: {}, //generate action creators\n    extraReducers: {\n        //State for getting Products, fetching products\n        [productsFetch.pending]: (state, action) => {\n            state.status = \"pending\";\n        },\n        [productsFetch.fulfilled]: (state, action) => {\n            state.items = action.payload;\n            state.status = \"success\";\n        },\n        [productsFetch.rejected]: (state, action) => {\n            state.status = \"rejected\";\n        },\n        //States for creating products\n        [productsCreate.pending]: (state, action) => {\n            state.createStatus = \"pending\";\n        },\n        [productsCreate.fulfilled]: (state, action) => {\n            state.items.push(action.payload);\n            state.createStatus = \"success\";\n        }, \n        [productsCreate.rejected]: (state, action) => {\n            state.createStatus = \"rejected\";\n        },\n    }, //only handle action types\n});\n\nexport default productsSlice.reducer;"],"mappings":"+fAAA,OAASA,WAAT,CAAsBC,gBAAtB,KAA8C,kBAA9C,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,KAAoB,OAApB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CAEA,GAAMC,aAAY,CAAG,CACjBC,KAAK,CAAE,EADU,CAEjBC,MAAM,CAAE,IAFS,CAGjBC,YAAY,CAAE,IAHG,CAArB,CAMA,MAAO,IAAMC,cAAa,CAAGR,gBAAgB,CAAE;AAC3C,wBADyC,wEAEzC,wLAE+BC,MAAK,CAACQ,GAAN,WAAaP,GAAb,cAF/B,QAEcQ,QAFd,eAE6D;AACrDC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EAAsB;AAH9B,gCAIeA,QAJf,SAIeA,QAJf,iBAIeA,QAAQ,CAAEG,IAJzB,0DAOQF,OAAO,CAACC,GAAR,cAPR,oEAFyC,GAAtC,CAcP,MAAO,IAAME,eAAc,CAAGd,gBAAgB,CAAE;AAC5C,yBAD0C,6FAE1C,kBAAMe,MAAN,6LAEyBd,MAAK,CAACe,IAAN,WAAcd,GAAd,cAA8Ba,MAA9B,CAFzB,QAEQL,QAFR,gBAEgE;AAC9DC,OAAO,CAACC,GAAR,CAAYG,MAAZ,EAAoB;AAHtB,iCAISL,QAAQ,CAACG,IAJlB,6DAOQF,OAAO,CAACC,GAAR,eACAT,KAAK,CAACc,KAAN,kBAAY,aAAMP,QAAlB,0CAAY,gBAAgBG,IAA5B,EARR,sEAF0C,gEAAvC,CAeP,GAAMK,cAAa,CAAGnB,WAAW,CAAC,CAC9B;AACAoB,IAAI,CAAE,UAFwB,CAG9Bf,YAAY,CAAZA,YAH8B,CAI9BgB,QAAQ,CAAE,EAJoB,CAIhB;AACdC,aAAa,mDAERb,aAAa,CAACc,OAFN,CAEgB,SAACC,KAAD,CAAQC,MAAR,CAAmB,CACxCD,KAAK,CAACjB,MAAN,CAAe,SAAf,CACH,CAJQ,iCAKRE,aAAa,CAACiB,SALN,CAKkB,SAACF,KAAD,CAAQC,MAAR,CAAmB,CAC1CD,KAAK,CAAClB,KAAN,CAAcmB,MAAM,CAACE,OAArB,CACAH,KAAK,CAACjB,MAAN,CAAe,SAAf,CACH,CARQ,iCASRE,aAAa,CAACmB,QATN,CASiB,SAACJ,KAAD,CAAQC,MAAR,CAAmB,CACzCD,KAAK,CAACjB,MAAN,CAAe,UAAf,CACH,CAXQ,iCAaRQ,cAAc,CAACQ,OAbP,CAaiB,SAACC,KAAD,CAAQC,MAAR,CAAmB,CACzCD,KAAK,CAAChB,YAAN,CAAqB,SAArB,CACH,CAfQ,iCAgBRO,cAAc,CAACW,SAhBP,CAgBmB,SAACF,KAAD,CAAQC,MAAR,CAAmB,CAC3CD,KAAK,CAAClB,KAAN,CAAYuB,IAAZ,CAAiBJ,MAAM,CAACE,OAAxB,EACAH,KAAK,CAAChB,YAAN,CAAqB,SAArB,CACH,CAnBQ,iCAoBRO,cAAc,CAACa,QApBP,CAoBkB,SAACJ,KAAD,CAAQC,MAAR,CAAmB,CAC1CD,KAAK,CAAChB,YAAN,CAAqB,UAArB,CACH,CAtBQ,iBAuBV;AA5B2B,CAAD,CAAjC,CA+BA,cAAeW,cAAa,CAACW,OAA7B"},"metadata":{},"sourceType":"module"}